---
import '../../styles/global.css';
---
<html lang="en">
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Login â€¢ SoulLog</title></head>
<body>
  <main class="max-w-md mx-auto p-6 space-y-6">
    <h1 class="text-3xl font-semibold text-center">Welcome back</h1>
    <form id="login-form" class="card p-4 space-y-3">
      <input name="email" type="email" placeholder="Email" class="w-full p-3 rounded-xl border border-slate-300" required />
      <input name="password" type="password" placeholder="Password" class="w-full p-3 rounded-xl border border-slate-300" required />
      <button class="w-full px-4 py-3 rounded-2xl bg-slate-900 text-white">Log in</button>
      <p class="text-sm text-slate-600">No account? <a href="/auth/signup" class="underline">Sign up</a></p>
      <div id="msg" class="text-sm"></div>
    </form>
  </main>
  <script type="module">
    import { supabase } from '/src/lib/supabaseClient.ts'
    const form=document.getElementById('login-form'), msg=document.getElementById('msg');
    form.addEventListener('submit', async (e)=>{
      e.preventDefault();
      const fd=new FormData(form); const email=fd.get('email'); const password=fd.get('password');
      const { error } = await supabase.auth.signInWithPassword({ email, password });
      if (error){ msg.textContent = error.message; return; }
      location.href = '/app/checkin';
    });
  </script>
</body>
</html>
